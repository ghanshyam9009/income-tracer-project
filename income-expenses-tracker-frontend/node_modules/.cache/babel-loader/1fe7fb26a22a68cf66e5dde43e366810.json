{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ghans\\\\Downloads\\\\income-expenses-frontend (2)\\\\income-expenses-frontend\\\\src\\\\components\\\\context\\\\AccountContext\\\\AccountContext.js\",\n    _s = $RefreshSig$();\n\nimport { createContext, useReducer } from \"react\";\nimport axios from \"axios\";\nimport { API_URL_ACC } from \"../../../utils/apiURL\";\nimport { ACCOUNT_DETAILS_SUCCESS, ACCOUNT_DETAILS_FAIL, ACCOUNT_CREATION_SUCCES, ACCOUNT_CREATION_FAIL } from \"./accountActionTypes\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const accountContext = /*#__PURE__*/createContext(); //Initial State\n\nconst INITIAL_STATE = {\n  userAuth: JSON.parse(localStorage.getItem(\"userAuth\")),\n  account: null,\n  accounts: [],\n  loading: false,\n  error: null\n}; //reducer\n\nconst accountReducer = (state, action) => {\n  const {\n    type,\n    payload\n  } = action;\n\n  switch (type) {\n    // Details\n    case ACCOUNT_DETAILS_SUCCESS:\n      return { ...state,\n        account: payload,\n        loading: false,\n        error: null\n      };\n\n    case ACCOUNT_DETAILS_FAIL:\n      return { ...state,\n        account: null,\n        loading: false,\n        error: payload\n      };\n    // Create\n\n    case ACCOUNT_CREATION_SUCCES:\n      return { ...state,\n        account: payload,\n        loading: false,\n        error: null\n      };\n\n    case ACCOUNT_CREATION_FAIL:\n      return { ...state,\n        account: null,\n        loading: false,\n        error: payload\n      };\n\n    default:\n      return state;\n  }\n}; //Provider\n\n\nexport const AccountContextProvider = _ref => {\n  _s();\n\n  var _res, _res$data3;\n\n  let {\n    children\n  } = _ref;\n  const [state, dispatch] = useReducer(accountReducer, INITIAL_STATE);\n  console.log(state); //Get account Details action\n\n  const getAccountDetailsAction = async id => {\n    var _state$userauth;\n\n    const config = {\n      headers: {\n        Authorization: `Bearer ${state === null || state === void 0 ? void 0 : (_state$userauth = state.userauth) === null || _state$userauth === void 0 ? void 0 : _state$userauth.token}`,\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    console.log(id);\n\n    try {\n      var _res$data;\n\n      const res = await axios.get(`${API_URL_ACC}/${id}`, config);\n\n      if ((res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.status) === \"success\") {\n        var _res$data2;\n\n        //dispatch\n        dispatch({\n          type: ACCOUNT_DETAILS_SUCCESS,\n          payload: res === null || res === void 0 ? void 0 : (_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : _res$data2.data\n        });\n      }\n    } catch (error) {\n      var _error$data, _error$data$response;\n\n      dispatch({\n        type: ACCOUNT_DETAILS_FAIL,\n        payload: error === null || error === void 0 ? void 0 : (_error$data = error.data) === null || _error$data === void 0 ? void 0 : (_error$data$response = _error$data.response) === null || _error$data$response === void 0 ? void 0 : _error$data$response.message\n      });\n    }\n  };\n\n  console.log((_res = res) === null || _res === void 0 ? void 0 : (_res$data3 = _res.data) === null || _res$data3 === void 0 ? void 0 : _res$data3.data); //Get account Details action\n\n  const createAccountAction = async formData => {\n    var _state$userAuth;\n\n    console.log(state === null || state === void 0 ? void 0 : state.userAuth);\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${state === null || state === void 0 ? void 0 : (_state$userAuth = state.userAuth) === null || _state$userAuth === void 0 ? void 0 : _state$userAuth.token}`\n      }\n    };\n\n    try {\n      var _res$data4;\n\n      const res = await axios.post(`${API_URL_ACC}`, formData, config);\n\n      if ((res === null || res === void 0 ? void 0 : (_res$data4 = res.data) === null || _res$data4 === void 0 ? void 0 : _res$data4.status) === \"success\") {\n        var _res$data5;\n\n        //dispatch\n        dispatch({\n          type: ACCOUNT_CREATION_SUCCES,\n          payload: res === null || res === void 0 ? void 0 : (_res$data5 = res.data) === null || _res$data5 === void 0 ? void 0 : _res$data5.data\n        });\n      }\n    } catch (error) {\n      var _error$data2, _error$data2$response;\n\n      console.log(error);\n      dispatch({\n        type: ACCOUNT_CREATION_FAIL,\n        payload: error === null || error === void 0 ? void 0 : (_error$data2 = error.data) === null || _error$data2 === void 0 ? void 0 : (_error$data2$response = _error$data2.response) === null || _error$data2$response === void 0 ? void 0 : _error$data2$response.message\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(accountContext.Provider, {\n    value: {\n      getAccountDetailsAction,\n      account: state === null || state === void 0 ? void 0 : state.account,\n      createAccountAction,\n      error: state === null || state === void 0 ? void 0 : state.error\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 120,\n    columnNumber: 5\n  }, this);\n};\n\n_s(AccountContextProvider, \"ih+Vd9fHXqjzC8XFlo5K5uS4lm8=\");\n\n_c = AccountContextProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"AccountContextProvider\");","map":{"version":3,"names":["createContext","useReducer","axios","API_URL_ACC","ACCOUNT_DETAILS_SUCCESS","ACCOUNT_DETAILS_FAIL","ACCOUNT_CREATION_SUCCES","ACCOUNT_CREATION_FAIL","accountContext","INITIAL_STATE","userAuth","JSON","parse","localStorage","getItem","account","accounts","loading","error","accountReducer","state","action","type","payload","AccountContextProvider","children","dispatch","console","log","getAccountDetailsAction","id","config","headers","Authorization","userauth","token","res","get","data","status","response","message","createAccountAction","formData","post"],"sources":["C:/Users/ghans/Downloads/income-expenses-frontend (2)/income-expenses-frontend/src/components/context/AccountContext/AccountContext.js"],"sourcesContent":["import { createContext, useReducer } from \"react\";\nimport axios from \"axios\";\nimport { API_URL_ACC } from \"../../../utils/apiURL\";\nimport {\n  ACCOUNT_DETAILS_SUCCESS,\n  ACCOUNT_DETAILS_FAIL,\n  ACCOUNT_CREATION_SUCCES,\n  ACCOUNT_CREATION_FAIL,\n} from \"./accountActionTypes\";\n\nexport const accountContext = createContext();\n//Initial State\n\nconst INITIAL_STATE = {\n  userAuth: JSON.parse(localStorage.getItem(\"userAuth\")),\n  account: null,\n  accounts: [],\n  loading: false,\n  error: null,\n};\n\n//reducer\nconst accountReducer = (state, action) => {\n  const { type, payload } = action;\n  switch (type) {\n    // Details\n    case ACCOUNT_DETAILS_SUCCESS:\n      return {\n        ...state,\n        account: payload,\n        loading: false,\n        error: null,\n      };\n    case ACCOUNT_DETAILS_FAIL:\n      return {\n        ...state,\n        account: null,\n        loading: false,\n        error: payload,\n      };\n    // Create\n    case ACCOUNT_CREATION_SUCCES:\n      return {\n        ...state,\n        account: payload,\n        loading: false,\n        error: null,\n      };\n    case ACCOUNT_CREATION_FAIL:\n      return {\n        ...state,\n        account: null,\n        loading: false,\n        error: payload,\n      };\n    default:\n      return state;\n  }\n};\n\n//Provider\nexport const AccountContextProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(accountReducer, INITIAL_STATE);\n  console.log(state);\n  //Get account Details action\n  const getAccountDetailsAction = async id => {\n    const config = {\n      headers: {\n        Authorization: `Bearer ${state?.userauth?.token}`,\n        \"Content-Type\": \"application/json\",\n      },\n    };\n    console.log(id);\n    try {\n      const res = await axios.get(`${API_URL_ACC}/${id}`, config);\n\n      if (res?.data?.status === \"success\") {\n        //dispatch\n        dispatch({\n          type: ACCOUNT_DETAILS_SUCCESS,\n          payload: res?.data?.data,\n        });\n      }\n    } catch (error) {\n      dispatch({\n        type: ACCOUNT_DETAILS_FAIL,\n        payload: error?.data?.response?.message,\n      });\n    }\n  };\n  console.log(res?.data?.data);\n\n  //Get account Details action\n  const createAccountAction = async formData => {\n    console.log(state?.userAuth);\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${state?.userAuth?.token}`,\n      },\n    };\n    try {\n      const res = await axios.post(`${API_URL_ACC}`, formData, config);\n      if (res?.data?.status === \"success\") {\n        //dispatch\n        dispatch({\n          type: ACCOUNT_CREATION_SUCCES,\n          payload: res?.data?.data,\n        });\n      }\n    } catch (error) {\n      console.log(error);\n      dispatch({\n        type: ACCOUNT_CREATION_FAIL,\n        payload: error?.data?.response?.message,\n      });\n    }\n  };\n  return (\n    <accountContext.Provider\n      value={{\n        getAccountDetailsAction,\n        account: state?.account,\n        createAccountAction,\n        error: state?.error,\n      }}\n    >\n      {children}\n    </accountContext.Provider>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}