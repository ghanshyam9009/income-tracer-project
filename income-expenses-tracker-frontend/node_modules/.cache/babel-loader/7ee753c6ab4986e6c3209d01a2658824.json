{"ast":null,"code":"var _jsxFileName = \"C:\\\\income tracer project\\\\income-expenses-tracker (frontend)\\\\src\\\\components\\\\context\\\\TransactionContext\\\\TransactionsContext.js\",\n    _s = $RefreshSig$();\n\nimport React, { createContext, useReducer } from \"react\";\nimport axios from \"axios\";\nimport { TRANSACTION_CREATION_STARTED, TRANSACTION_CREATION_SUCCES, TRANSACTION_CREATION_FAIL } from \"./transactionsActionTypes\";\nimport { API_URL_TRANSACTION } from \"../../../utils/apiURL\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const transactionContext = /*#__PURE__*/createContext();\nconst INITIAL_STATE = {\n  transaction: null,\n  transactions: [],\n  loading: false,\n  error: null,\n  token: JSON.parse(localStorage.getItem(\"userAuth\"))\n};\n\nconst transactionReducer = (state, action) => {\n  const {\n    type,\n    payload\n  } = action;\n\n  switch (type) {\n    case TRANSACTION_CREATION_SUCCES:\n      return { ...state,\n        loading: false,\n        transaction: payload\n      };\n\n    case TRANSACTION_CREATION_FAIL:\n      return { ...state,\n        loading: false,\n        error: payload\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport const TransactionContextProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [state, dispatch] = useReducer(transactionReducer, INITIAL_STATE); //create account\n\n  const createTransactionAction = async accountData => {\n    try {\n      var _state$token, _res$data;\n\n      //header\n      const config = {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${state === null || state === void 0 ? void 0 : (_state$token = state.token) === null || _state$token === void 0 ? void 0 : _state$token.token}`\n        }\n      }; //request\n\n      const res = await axios.post(API_URL_TRANSACTION, accountData, config);\n      console.log(res);\n\n      if ((res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.status) === \"success\") {\n        dispatch({\n          type: TRANSACTION_CREATION_SUCCES,\n          payload: res === null || res === void 0 ? void 0 : res.data\n        });\n      } //Redirect\n\n\n      window.location.href = \"/account-details\";\n    } catch (error) {\n      var _error$response, _error$response$data;\n\n      console.log(error);\n      dispatch({\n        type: TRANSACTION_CREATION_FAIL,\n        payload: error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(transactionContext.Provider, {\n    value: {\n      transaction: state.transaction,\n      transactions: state.transactions,\n      createTransactionAction,\n      error: state === null || state === void 0 ? void 0 : state.error\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n};\n\n_s(TransactionContextProvider, \"ih+Vd9fHXqjzC8XFlo5K5uS4lm8=\");\n\n_c = TransactionContextProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"TransactionContextProvider\");","map":{"version":3,"names":["React","createContext","useReducer","axios","TRANSACTION_CREATION_STARTED","TRANSACTION_CREATION_SUCCES","TRANSACTION_CREATION_FAIL","API_URL_TRANSACTION","transactionContext","INITIAL_STATE","transaction","transactions","loading","error","token","JSON","parse","localStorage","getItem","transactionReducer","state","action","type","payload","TransactionContextProvider","children","dispatch","createTransactionAction","accountData","config","headers","Authorization","res","post","console","log","data","status","window","location","href","response","message"],"sources":["C:/income tracer project/income-expenses-tracker (frontend)/src/components/context/TransactionContext/TransactionsContext.js"],"sourcesContent":["import React, { createContext, useReducer } from \"react\";\nimport axios from \"axios\";\nimport {\n  TRANSACTION_CREATION_STARTED,\n  TRANSACTION_CREATION_SUCCES,\n  TRANSACTION_CREATION_FAIL,\n} from \"./transactionsActionTypes\";\nimport { API_URL_TRANSACTION } from \"../../../utils/apiURL\";\n\nexport const transactionContext = createContext();\n\nconst INITIAL_STATE = {\n  transaction: null,\n  transactions: [],\n  loading: false,\n  error: null,\n  token: JSON.parse(localStorage.getItem(\"userAuth\")),\n};\nconst transactionReducer = (state, action) => {\n  const { type, payload } = action;\n  switch (type) {\n    case TRANSACTION_CREATION_SUCCES:\n      return {\n        ...state,\n        loading: false,\n        transaction: payload,\n      };\n    case TRANSACTION_CREATION_FAIL:\n      return {\n        ...state,\n        loading: false,\n        error: payload,\n      };\n    default:\n      return state;\n  }\n};\n\nexport const TransactionContextProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(transactionReducer, INITIAL_STATE);\n\n  //create account\n  const createTransactionAction = async accountData => {\n    try {\n      //header\n      const config = {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${state?.token?.token}`,\n        },\n      };\n      //request\n      const res = await axios.post(API_URL_TRANSACTION, accountData, config);\n      console.log(res);\n      if (res?.data?.status === \"success\") {\n        dispatch({ type: TRANSACTION_CREATION_SUCCES, payload: res?.data });\n      }\n       //Redirect\n       window.location.href = \"/account-details\";\n\n    } catch (error) {\n      console.log(error);\n      dispatch({\n        type: TRANSACTION_CREATION_FAIL,\n        payload: error?.response?.data?.message,\n      });\n    }\n  };\n  return (\n    <transactionContext.Provider\n      value={{\n        transaction: state.transaction,\n        transactions: state.transactions,\n        createTransactionAction,\n        error: state?.error,\n      }}\n    >\n      {children}\n    </transactionContext.Provider>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}