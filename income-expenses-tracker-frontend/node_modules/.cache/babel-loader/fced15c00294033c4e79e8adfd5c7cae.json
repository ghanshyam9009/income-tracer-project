{"ast":null,"code":"import _regeneratorRuntime from\"C:/income tracer project/income-expenses-tracker (frontend)/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/income tracer project/income-expenses-tracker (frontend)/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/income tracer project/income-expenses-tracker (frontend)/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"C:/income tracer project/income-expenses-tracker (frontend)/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{createContext,useReducer}from\"react\";import axios from\"axios\";import{API_URL_ACC}from\"../../../utils/apiURL\";import{ACCOUNT_DETAILS_SUCCESS,ACCOUNT_DETAILS_FAIL,ACCOUNT_CREATION_SUCCES,ACCOUNT_CREATION_FAIL}from\"./accountActionTypes\";import{jsx as _jsx}from\"react/jsx-runtime\";export var accountContext=/*#__PURE__*/createContext();//Initial State\nvar INITIAL_STATE={userAuth:JSON.parse(localStorage.getItem(\"userAuth\")),account:null,accounts:[],loading:false,error:null};//reducer\nvar accountReducer=function accountReducer(state,action){var type=action.type,payload=action.payload;switch(type){// Details\ncase ACCOUNT_DETAILS_SUCCESS:return _objectSpread(_objectSpread({},state),{},{account:payload,loading:false,error:null});case ACCOUNT_DETAILS_FAIL:return _objectSpread(_objectSpread({},state),{},{account:null,loading:false,error:payload});// Create\ncase ACCOUNT_CREATION_SUCCES:return _objectSpread(_objectSpread({},state),{},{account:payload,loading:false,error:null});case ACCOUNT_CREATION_FAIL:return _objectSpread(_objectSpread({},state),{},{account:null,loading:false,error:payload});default:return state;}};//Provider\nexport var AccountContextProvider=function AccountContextProvider(_ref){var children=_ref.children;var _useReducer=useReducer(accountReducer,INITIAL_STATE),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];console.log(state);//Get account Details action\nvar getAccountDetailsAction=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(id){var _state$userauth;var config,_res$data,res,_res$data2,_error$data,_error$data$response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:config={headers:{Authorization:\"Bearer \".concat(state===null||state===void 0?void 0:(_state$userauth=state.userauth)===null||_state$userauth===void 0?void 0:_state$userauth.token),\"Content-Type\":\"application/json\"}};console.log(id);_context.prev=2;_context.next=5;return axios.get(\"\".concat(API_URL_ACC,\"/\").concat(id),config);case 5:res=_context.sent;if((res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.status)===\"success\"){//dispatch\ndispatch({type:ACCOUNT_DETAILS_SUCCESS,payload:res===null||res===void 0?void 0:(_res$data2=res.data)===null||_res$data2===void 0?void 0:_res$data2.data});}_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);dispatch({type:ACCOUNT_DETAILS_FAIL,payload:_context.t0===null||_context.t0===void 0?void 0:(_error$data=_context.t0.data)===null||_error$data===void 0?void 0:(_error$data$response=_error$data.response)===null||_error$data$response===void 0?void 0:_error$data$response.message});case 12:case\"end\":return _context.stop();}}},_callee,null,[[2,9]]);}));return function getAccountDetailsAction(_x){return _ref2.apply(this,arguments);};}();// console.log(res?.data?.data);\n//Get account Details action\nvar createAccountAction=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(formData){var _state$userAuth;var config,_res$data3,res,_res$data4,_error$data2,_error$data2$response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(state===null||state===void 0?void 0:state.userAuth);config={headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(state===null||state===void 0?void 0:(_state$userAuth=state.userAuth)===null||_state$userAuth===void 0?void 0:_state$userAuth.token)}};_context2.prev=2;_context2.next=5;return axios.post(\"\".concat(API_URL_ACC),formData,config);case 5:res=_context2.sent;if((res===null||res===void 0?void 0:(_res$data3=res.data)===null||_res$data3===void 0?void 0:_res$data3.status)===\"success\"){//dispatch\ndispatch({type:ACCOUNT_CREATION_SUCCES,payload:res===null||res===void 0?void 0:(_res$data4=res.data)===null||_res$data4===void 0?void 0:_res$data4.data});}//Redirect\nwindow.location.href=\"/dashboard\";_context2.next=14;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](2);console.log(_context2.t0);dispatch({type:ACCOUNT_CREATION_FAIL,payload:_context2.t0===null||_context2.t0===void 0?void 0:(_error$data2=_context2.t0.data)===null||_error$data2===void 0?void 0:(_error$data2$response=_error$data2.response)===null||_error$data2$response===void 0?void 0:_error$data2$response.message});case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[2,10]]);}));return function createAccountAction(_x2){return _ref3.apply(this,arguments);};}();//Redirect\n// window.location.href = \"/login\";\nreturn/*#__PURE__*/_jsx(accountContext.Provider,{value:{getAccountDetailsAction:getAccountDetailsAction,account:state===null||state===void 0?void 0:state.account,createAccountAction:createAccountAction,error:state===null||state===void 0?void 0:state.error},children:children});};","map":{"version":3,"names":["createContext","useReducer","axios","API_URL_ACC","ACCOUNT_DETAILS_SUCCESS","ACCOUNT_DETAILS_FAIL","ACCOUNT_CREATION_SUCCES","ACCOUNT_CREATION_FAIL","accountContext","INITIAL_STATE","userAuth","JSON","parse","localStorage","getItem","account","accounts","loading","error","accountReducer","state","action","type","payload","AccountContextProvider","children","dispatch","console","log","getAccountDetailsAction","id","config","headers","Authorization","userauth","token","get","res","data","status","response","message","createAccountAction","formData","post","window","location","href"],"sources":["C:/income tracer project/income-expenses-tracker (frontend)/src/components/context/AccountContext/AccountContext.js"],"sourcesContent":["import { createContext, useReducer } from \"react\";\nimport axios from \"axios\";\nimport { API_URL_ACC } from \"../../../utils/apiURL\";\nimport {\n  ACCOUNT_DETAILS_SUCCESS,\n  ACCOUNT_DETAILS_FAIL,\n  ACCOUNT_CREATION_SUCCES,\n  ACCOUNT_CREATION_FAIL,\n} from \"./accountActionTypes\";\n\nexport const accountContext = createContext();\n//Initial State\n\nconst INITIAL_STATE = {\n  userAuth: JSON.parse(localStorage.getItem(\"userAuth\")),\n  account: null,\n  accounts: [],\n  loading: false,\n  error: null,\n};\n\n//reducer\nconst accountReducer = (state, action) => {\n  const { type, payload } = action;\n  switch (type) {\n    // Details\n    case ACCOUNT_DETAILS_SUCCESS:\n      return {\n        ...state,\n        account: payload,\n        loading: false,\n        error: null,\n      };\n    case ACCOUNT_DETAILS_FAIL:\n      return {\n        ...state,\n        account: null,\n        loading: false,\n        error: payload,\n      };\n    // Create\n    case ACCOUNT_CREATION_SUCCES:\n      return {\n        ...state,\n        account: payload,\n        loading: false,\n        error: null,\n      };\n    case ACCOUNT_CREATION_FAIL:\n      return {\n        ...state,\n        account: null,\n        loading: false,\n        error: payload,\n      };\n    default:\n      return state;\n  }\n};\n\n//Provider\nexport const AccountContextProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(accountReducer, INITIAL_STATE);\n  console.log(state);\n  //Get account Details action\n  const getAccountDetailsAction = async id => {\n    const config = {\n      headers: {\n        Authorization: `Bearer ${state?.userauth?.token}`,\n        \"Content-Type\": \"application/json\",\n      },\n    };\n    console.log(id);\n    try {\n      const res = await axios.get(`${API_URL_ACC}/${id}`, config);\n\n      if (res?.data?.status === \"success\") {\n        //dispatch\n        dispatch({\n          type: ACCOUNT_DETAILS_SUCCESS,\n          payload: res?.data?.data,\n        });\n      }\n    } catch (error) {\n      dispatch({\n        type: ACCOUNT_DETAILS_FAIL,\n        payload: error?.data?.response?.message,\n      });\n    }\n  };\n  // console.log(res?.data?.data);\n\n  //Get account Details action\n  const createAccountAction = async formData => {\n    console.log(state?.userAuth);\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${state?.userAuth?.token}`,\n      },\n    };\n    try {\n      const res = await axios.post(`${API_URL_ACC}`, formData, config);\n      if (res?.data?.status === \"success\") {\n        //dispatch\n        dispatch({\n          type: ACCOUNT_CREATION_SUCCES,\n          payload: res?.data?.data,\n        });\n      }\n         //Redirect\n         window.location.href = \"/dashboard\";\n    }\n     catch (error) {\n      console.log(error);\n      dispatch({\n        type: ACCOUNT_CREATION_FAIL,\n        payload: error?.data?.response?.message,\n      });\n    }\n  };\n  //Redirect\n  // window.location.href = \"/login\";\n  \n\n  return (\n    <accountContext.Provider\n      value={{\n        getAccountDetailsAction,\n        account: state?.account,\n        createAccountAction,\n        error: state?.error,\n      }}\n    >\n      {children}\n    </accountContext.Provider>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}